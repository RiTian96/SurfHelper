# JavDB影片管理器

## 🔗 仓库导航
- **GitHub仓库**: [https://github.com/RiTian96/SurfHelper](https://github.com/RiTian96/SurfHelper)
- **Greasy Fork**: [https://greasyfork.org/zh-CN/users/332142-ritian96](https://greasyfork.org/zh-CN/users/332142-ritian96)

## ✨ 主要功能
- **已看/想看屏蔽** - 自动识别并降低已看/想看影片的透明度，避免重复浏览
- **智能评分过滤** - 10人以下正常显示，10人以上按分数分级（0-3.5屏蔽，3.5-4.0正常，4.0-4.5推荐，4.5以上必看）
- **批量导入** - 支持从已看/想看页面批量导入影片列表，智能翻页
- **智能管理** - 快速搜索添加/删除影片，右上角悬浮面板管理
- **按钮联动** - 影片详情页点击想看/看過按钮自动导入番号到本地列表
- **页面区分屏蔽** - 看过页面不屏蔽想看影片，想看页面不屏蔽看过影片

## 🚀 如何使用
1. **安装脚本** - 点击[安装链接](https://raw.githubusercontent.com/RiTian96/SurfHelper/main/tampermonkey-scripts/javdb-manager.user.js)，在油猴插件中安装
2. **导入影片** - 访问JavDB的「看过影片」或「想看影片」页面，点击右上角管理器图标，选择对应导入按钮
3. **管理影片** - 在任意页面点击管理器图标，切换到"管理"标签页，搜索并添加/删除影片
4. **自定义设置** - 在管理面板中开启/关闭各项功能，设置自动保存

## 📋 更新日志
### v1.5.2 (2026-02-08)
- 🔄 自动数据迁移：脚本启动时自动清理历史数据，标准化旧番号
- 🛡️ 智能去重：自动检测并清理已看/想看列表中的重复项
- 🔧 跨列表重复处理：自动处理同时存在于两个列表中的番号

### v1.5.1 (2026-02-08)
- 🔧 番号标准化存储：所有番号统一转换为大写并去除空格，防止重复导入
- 🔄 智能标准化处理：列表页、详情页、手动添加、批量导入均自动标准化
- 🛡️ 防重复机制优化：彻底解决 vixen/Vixen、RK Prime/RKPrime 等重复导入问题

### v1.5.0 (2026-02-05)
- 🌐 新增欧美区番号支持：详情页和列表页都支持欧美区格式（如 BangBus、RKPrime）
- 🔧 优化匹配逻辑：整个脚本统一使用不区分大小写和空格的匹配方式
- 🔍 增强管理窗口搜索：支持前缀匹配，方便用户搜索部分番号
- ⚡ 改进详情页按钮联动：移除延迟，点击想看/看過按钮立即添加番号
- 🔄 新增删除按钮自动刷新：点击删除按钮后自动刷新页面，确保状态同步

### v1.4.0 (2025-12-04)
- 🎯 新增页面区分屏蔽：看过页面不屏蔽想看影片，想看页面不屏蔽看过影片
- 🎨 优化视觉标记：未屏蔽影片使用虚线边框和淡色背景标记状态
- 📱 增强用户体验：便于直观识别状态变化，支持快速转移影片状态
- 🔧 改进页面导航：自动识别页面类型并应用相应屏蔽策略

### v1.3.0 (2025-12-03)
- 🎯 新增影片详情页按钮联动：点击想看/看過按钮自动导入番号
- 🔍 优化番号获取逻辑：支持多种页面结构的番号提取
- ⚡ 改进按钮绑定机制：防止重复绑定，确保稳定性
- 🛡️ 增强错误处理：完善的异常捕获和用户反馈

### v1.2.0 (2025-12-03)
- 🎯 重构评分规则：10人以下正常显示，10人以上按分数分级
- 📊 新评分分级：0-3.5分屏蔽，3.5-4.0分正常，4.0-4.5分推荐，4.5分以上必看
- 🎨 优化高亮样式，推荐和必看标记更加明显
- ⚖️ 简化评分逻辑，提高判断准确性

### v1.1.1 (2025-12-03)
- 🌐 添加目标网站favicon图标
- 🌐 新增谷歌图标服务作为备选方案
- 🚀 优化翻页逻辑，改用URL+1方式直接跳转，更稳定可靠
- 🛑 简化停止条件，仅检测"暫無內容"和无番号两种情况
- 🔄 改进去重机制，同一番号只能在想看/已看中存在一个

### v1.0.0 (2025-12-03)
- 🎉 初始版本发布
- ✨ 实现已看/想看影片屏蔽功能
- ✨ 添加评分高亮系统（必看/推荐标记）
- ✨ 实现批量导入功能，支持翻页自动导入
- ✨ 添加智能搜索和管理界面

## 🐛 问题反馈
- TG频道: https://t.me/SurfHelper_C
- TG群组: https://t.me/SurfHelper_G