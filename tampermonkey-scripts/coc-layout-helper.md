# COC阵型复制助手

## 📋 脚本介绍

COC阵型复制助手是一款专为 Clash of Clans (部落冲突) 玩家设计的强大工具，能够绕过网站的付费和次数限制，让您轻松获取和分享阵型链接。脚本集成了多项实用功能，提供极致的用户体验。

## ✨ 主要功能

### 🔓 核心破解功能
- **无感提取** - 后台静默获取阵型链接，无需付费或登录
- **无痕访问** - 模拟新访客请求，绕过次数限制
- **智能拦截** - 自动捕获复制请求并提取真实链接
- **即时复制** - 一键复制阵型链接到剪贴板

### 🖼️ 增强体验功能
- **巨型预览** - 鼠标悬停显示高清大图，自适应屏幕尺寸
- **智能避让** - 大图智能避开鼠标位置，不影响浏览
- **即时加载** - 图片预加载，确保流畅的预览体验
- **视觉反馈** - 操作状态实时显示，成功/失败一目了然

### 🎒 资源管理功能
- **历史背包** - 左侧悬浮背包自动记录复制的阵型
- **快速访问** - 点击历史记录快速重新复制链接
- **容量管理** - 最多保存50条历史记录，自动清理旧条目
- **二维码支持** - 支持扫码直连阵型

## 🎯 核心特性

### 🛡️ 安全机制
- **无痕模式** - 不携带用户Cookie，保护账号安全
- **本地处理** - 所有操作在本地完成，不上传数据
- **智能过滤** - 自动屏蔽网站的付费提示和弹窗

### ⚡ 性能优化
- **异步处理** - 非阻塞式网络请求，不影响页面响应
- **智能缓存** - 图片预加载，提升预览速度
- **资源管理** - 自动清理过期历史记录，优化内存使用

### 🎨 用户体验
- **响应式设计** - 适配各种屏幕尺寸和分辨率
- **平滑动画** - 所有交互都有流畅的过渡效果
- **直观操作** - 简单易用的界面，无需学习成本

## 🚀 安装使用

### 安装步骤
1. 确保已安装 [Tampermonkey](https://www.tampermonkey.net/) 油猴插件
2. 点击 [🔧 安装脚本](https://raw.githubusercontent.com/RiTian96/SurfHelper/main/tampermonkey-scripts/coc-layout-helper.user.js)
3. 在弹出的页面中点击"安装"
4. 访问 [黑羽COC](https://coc.6oh.cn/) 网站即可享受增强功能

### 基础使用

#### 获取阵型链接
1. 浏览阵型列表，找到喜欢的阵型
2. 点击"复制链接"按钮
3. 脚本会自动绕过限制，提取真实链接
4. 链接自动复制到剪贴板，可直接在游戏中使用

#### 预览高清大图
1. 将鼠标悬停在任意阵型卡片上
2. 自动显示高清大图预览
3. 大图会智能避开鼠标位置
4. 移开鼠标后预览自动消失

#### 管理历史记录
1. 点击页面左侧的背包图标 🎒
2. 查看所有已复制的阵型历史
3. 点击任意历史记录可重新复制链接
4. 历史记录按时间倒序排列，最新在前

## 🔧 高级配置

脚本提供了简单的配置选项，可在代码中调整：

```javascript
const CONFIG = {
    bagMaxItems: 50,    // 历史记录最大保存数量
    debug: false        // 是否开启调试日志
};
```

## 📋 版本历史

### 🏰 COC阵型复制助手 (v1.1.2)
- 🐛 修复复制功能失效问题
- 🔧 优化网络请求处理逻辑
- 🛡️ 增强DOM操作安全性
- 🎨 改进CSS样式兼容性
- ⚡ 提升整体稳定性

### v1.1.2 (2025-12-03) - 图标优化
- 添加目标网站favicon图标
- 新增谷歌图标服务作为备选方案
- **🔄 自动更新支持** - 添加@updateURL和@downloadURL支持油猴自动更新

## 🔧 技术细节

### 破解原理
脚本通过拦截 XMLHttpRequest 请求，在用户点击"复制链接"时：
1. 捕获原始请求数据
2. 发送无 Cookie 的模拟请求
3. 从响应中提取真实的阵型链接
4. 自动复制到剪贴板并显示成功提示

### 选择器适配
脚本针对黑羽COC网站的HTML结构进行了优化：
- 主要卡片：`.zxlb2`
- 复制按钮：`.copy2` 或 `[act="zhenxing_fz"]`
- 大图链接：`a[href$=".jpg"]`

### 兼容性
- 支持黑羽COC主站及所有子域名
- 兼容现代浏览器（Chrome、Firefox、Edge等）
- 响应式设计，支持各种屏幕尺寸

## ⚠️ 注意事项

1. **使用频率** - 虽然绕过了限制，但建议合理使用，避免给服务器造成压力
2. **链接有效期** - 阵型链接可能有时效性，建议及时在游戏中使用
3. **网络环境** - 需要稳定的网络连接以确保链接提取成功
4. **浏览器兼容** - 推荐使用现代浏览器以获得最佳体验

## 🐛 问题反馈

如遇到问题或有功能建议，请通过以下方式联系：
- TG频道: https://t.me/SurfHelper_C
- TG群组: https://t.me/SurfHelper_G

## 📄 许可证

本项目采用 MIT 许可证，可自由使用、修改和分发。

---

**免责声明：** 本脚本仅供学习和研究使用，请遵守相关网站的使用条款。