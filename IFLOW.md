# SurfHelper é¡¹ç›®ä¸Šä¸‹æ–‡

## ğŸ–¥ï¸ å¼€å‘ç¯å¢ƒä¸ç”¨æˆ·åå¥½
- **æ“ä½œç³»ç»Ÿ**: Windows 64ä½ (win32)
- **å¤„ç†å™¨æ¶æ„**: x64
- **Shell ç¯å¢ƒ**: PowerShell
- **è¯­è¨€ç¯å¢ƒ**: ä¸­æ–‡ç”¨æˆ·ï¼Œä½¿ç”¨ä¸­æ–‡è¿›è¡Œäº¤æµ
- **å½“å‰æ—¥æœŸ**: 2026å¹´2æœˆ8æ—¥

### Windows å¹³å°è¯­æ³•æ³¨æ„äº‹é¡¹
- **å‘½ä»¤è¿æ¥ç¬¦**: ä½¿ç”¨ `;` åˆ†éš”å¤šä¸ªå‘½ä»¤ï¼Œè€Œé Unix/Linux çš„ `&&`
- **è·¯å¾„åˆ†éš”ç¬¦**: ä½¿ç”¨ `\` æˆ– `/`ï¼ŒPowerShell å…¼å®¹ä¸¤ç§æ ¼å¼
- **å­—ç¬¦ä¸²å¼•ç”¨**: ä¼˜å…ˆä½¿ç”¨åŒå¼•å· `"`ï¼Œå•å¼•å· `'` ç”¨äºå­—é¢é‡å­—ç¬¦ä¸²
- **å‘½ä»¤æ‰§è¡Œ**: é¿å…ä½¿ç”¨ Unix ç‰¹æœ‰çš„å‘½ä»¤å¦‚ `ls`ã€`cat`ï¼Œä½¿ç”¨ PowerShell å¯¹åº”å‘½ä»¤å¦‚ `Get-ChildItem`ã€`Get-Content`
- **ç¯å¢ƒå˜é‡**: ä½¿ç”¨ `$env:VARIABLE_NAME` æ ¼å¼ï¼Œå¦‚ `$env:PATH`

## ğŸ”— ç›¸å…³é“¾æ¥
- **GitHubä»“åº“**: [https://github.com/RiTian96/SurfHelper](https://github.com/RiTian96/SurfHelper)
- **Greasy Fork**: [https://greasyfork.org/zh-CN/users/332142-ritian96](https://greasyfork.org/zh-CN/users/332142-ritian96)
- **TGé¢‘é“**: https://t.me/SurfHelper_C
- **TGç¾¤ç»„**: https://t.me/SurfHelper_G

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

SurfHelper æ˜¯ä¸ªäººå¼€å‘çš„å°è„šæœ¬é›†åˆï¼Œä¸“æ³¨äºæå‡ç½‘é¡µæµè§ˆä½“éªŒã€‚é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åŒ…å«å¤šä¸ª Tampermonkey æ²¹çŒ´è„šæœ¬ï¼Œæ¯ä¸ªè„šæœ¬ç‹¬ç«‹è¿è¡Œï¼Œä¸“æ³¨äºç‰¹å®šç½‘ç«™çš„åŠŸèƒ½å¢å¼ºã€‚æ‰€æœ‰è„šæœ¬å‡åœ¨å‰ç«¯è¿è¡Œï¼Œä¸æ”¶é›†ç”¨æˆ·æ•°æ®ï¼Œå®‰å…¨å¯é ã€‚

### è®¾è®¡ç†å¿µ
- **ä¸“æ³¨ä½“éªŒ**: è§£å†³å®é™…æµè§ˆç—›ç‚¹ï¼Œæå‡æ•ˆç‡
- **å®‰å…¨å¯é **: çº¯å‰ç«¯è¿è¡Œï¼Œä¸æ”¶é›†ç”¨æˆ·éšç§æ•°æ®
- **æŒç»­è¿­ä»£**: æ ¹æ®ç”¨æˆ·åé¦ˆä¸æ–­ä¼˜åŒ–åŠŸèƒ½

## ğŸ› ï¸ è„šæœ¬çŸ©é˜µ

### å½“å‰è„šæœ¬åˆ—è¡¨

| è„šæœ¬åç§° | ç‰ˆæœ¬ | ç›®æ ‡ç½‘ç«™ | æ ¸å¿ƒåŠŸèƒ½ |
|---------|------|---------|---------|
| **COCé˜µå‹å¤åˆ¶åŠ©æ‰‹** | 1.1.3 | `*://coc.6oh.cn/*` | ç»•è¿‡ä»˜è´¹é™åˆ¶æå–é˜µå‹é“¾æ¥ï¼Œå¤§å›¾é¢„è§ˆï¼Œå†å²è®°å½•èƒŒåŒ… |
| **JavDBå½±ç‰‡ç®¡ç†å™¨** | 1.5.1 | `https://javdb.com/*` | å·²çœ‹/æƒ³çœ‹å½±ç‰‡å±è”½ï¼Œè¯„åˆ†é«˜äº®ï¼Œæ‰¹é‡ç®¡ç†ï¼Œæ¬§ç¾åŒºç•ªå·æ”¯æŒï¼Œç•ªå·æ ‡å‡†åŒ–å­˜å‚¨ |
| **VIPè§†é¢‘è§£æå™¨** | 1.4.2 | å¤šå¹³å°è§†é¢‘ç½‘ç«™ | 15ä¸ªè§£ææ¥å£é›†æˆï¼Œè‡ªåŠ¨è§£æï¼Œæ¥å£è¯„åˆ†ç³»ç»Ÿ |
| **å¾®åšç£é“¾è¡¥å…¨åŠ©æ‰‹** | 1.1.1 | `*://weibo.com/*` | æ™ºèƒ½è¯†åˆ«40ä½ç£åŠ›å“ˆå¸Œå€¼ï¼Œè‡ªåŠ¨è¡¥å…¨magneté“¾æ¥ |

### åŠŸèƒ½åˆ†ç±»

#### ğŸ”“ ç ´è§£å¢å¼ºç±»
- **COCé˜µå‹å¤åˆ¶åŠ©æ‰‹**: ç»•è¿‡ä»˜è´¹/æ¬¡æ•°é™åˆ¶ï¼Œæ— æ„Ÿæå–é˜µå‹é“¾æ¥
- **VIPè§†é¢‘è§£æå™¨**: å¤šå¹³å°VIPå†…å®¹è§£æï¼Œæ”¯æŒè‡ªåŠ¨åˆ‡æ¢æ¥å£

#### ğŸ›¡ï¸ å†…å®¹ç®¡ç†ç±»
- **JavDBå½±ç‰‡ç®¡ç†å™¨**: æ™ºèƒ½å±è”½ä¸è¯„åˆ†è¿‡æ»¤ï¼Œæ‰¹é‡å¯¼å…¥ç®¡ç†

#### ğŸ”— é“¾æ¥å¤„ç†ç±»
- **å¾®åšç£é“¾è¡¥å…¨åŠ©æ‰‹**: è‡ªåŠ¨è¯†åˆ«å¹¶è¡¥å…¨ç£åŠ›é“¾æ¥

## ğŸ“ å¼€å‘çº¦å®š

### ä»£ç é£æ ¼
- ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ (`'use strict'`)
- é‡‡ç”¨ç°ä»£ JavaScript (ES6+) è¯­æ³•
- ä»£ç ç»“æ„æ¸…æ™°ï¼Œåˆ†æ®µæ³¨é‡Šæ˜ç¡®ï¼ˆä½¿ç”¨ `=== Section Name ===` æ ¼å¼ï¼‰
- åŠŸèƒ½æ¨¡å—åŒ–ï¼Œé…ç½®ä¸é€»è¾‘åˆ†ç¦»
- ä½¿ç”¨ `const`/`let` æ›¿ä»£ `var`ï¼Œé¿å…å˜é‡æå‡é—®é¢˜

### è„šæœ¬å…ƒæ•°æ®è§„èŒƒ

æ‰€æœ‰è„šæœ¬å¿…é¡»åŒ…å«å®Œæ•´çš„ Tampermonkey å…ƒæ•°æ®å—ï¼š

```javascript
// ==UserScript==
// @name         è„šæœ¬åç§°ï¼ˆä¸­æ–‡ï¼‰
// @namespace    https://github.com/RiTian96/SurfHelper
// @version      Major.Minor.Patch
// @description  [æ ¸å¿ƒ] ä¸»è¦åŠŸèƒ½ï¼›[è¾…åŠ©] æ¬¡è¦åŠŸèƒ½ï¼›[èµ„æº] å…¶ä»–åŠŸèƒ½
// @author       RiTian96
// @match        ç›®æ ‡ç½‘ç«™åŒ¹é…è§„åˆ™
// @icon         ç½‘ç«™faviconå›¾æ ‡ï¼ˆåŒé‡ä¿é™©ï¼‰
// @grant        æ‰€éœ€æƒé™ï¼ˆGM_addStyle, GM_setValueç­‰ï¼‰
// @run-at       document-start æˆ– document-idle
// @license      MIT
// @updateURL    https://raw.githubusercontent.com/RiTian96/SurfHelper/main/tampermonkey-scripts/xxx.user.js
// @downloadURL  https://raw.githubusercontent.com/RiTian96/SurfHelper/main/tampermonkey-scripts/xxx.user.js
// ==/UserScript==
```

### å¸¸ç”¨æƒé™è¯´æ˜
- `GM_addStyle`: æ³¨å…¥è‡ªå®šä¹‰CSSæ ·å¼
- `GM_setValue` / `GM_getValue`: è·¨é¡µé¢æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- `GM_deleteValue` / `GM_listValues`: æ•°æ®ç®¡ç†
- `GM_setClipboard`: è®¾ç½®å‰ªè´´æ¿å†…å®¹

### ç‰ˆæœ¬ç®¡ç†
- é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ (SemVer: Major.Minor.Patch)
- **Major**: é‡å¤§åŠŸèƒ½å˜æ›´æˆ–ç ´åæ€§æ›´æ–°
- **Minor**: æ–°å¢åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- **Patch**: Bugä¿®å¤æˆ–å°çš„ä¼˜åŒ–
- æ¯ä¸ªè„šæœ¬éƒ½æœ‰å¯¹åº”çš„ Markdown æ–‡æ¡£å’Œæ›´æ–°æ—¥å¿—
- ç‰ˆæœ¬å·åœ¨è„šæœ¬å’Œæ–‡æ¡£ä¸­ä¿æŒåŒæ­¥

### æ–‡æ¡£æ ¼å¼è§„èŒƒ

æ‰€æœ‰è„šæœ¬æ–‡æ¡£ (`.md`) å¿…é¡»åŒ…å«ä»¥ä¸‹5ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š

1. **ä»“åº“å¯¼èˆª** - GitHubå’ŒGreasy Forké“¾æ¥
2. **ä¸»è¦åŠŸèƒ½** - ç²¾ç®€çš„æ ¸å¿ƒåŠŸèƒ½ç‚¹æè¿°ï¼Œä½¿ç”¨åˆ—è¡¨å½¢å¼
3. **å¦‚ä½•ä½¿ç”¨** - æ¸…æ™°çš„å®‰è£…å’Œä½¿ç”¨æ­¥éª¤
4. **æ›´æ–°æ—¥å¿—** - æŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼Œæ¯ä¸ªç‰ˆæœ¬æ˜ç¡®æ ‡æ³¨æ—¥æœŸï¼Œä½¿ç”¨emojiæ ‡è®°
5. **é—®é¢˜åé¦ˆ** - TGè”ç³»æ–¹å¼

### æ›´æ–°æ—¥å¿— Emoji è§„èŒƒ

| Emoji | å«ä¹‰ |
|-------|------|
| ğŸŒ | å›¾æ ‡ç›¸å…³æ›´æ–° |
| ğŸ¯ | æ–°åŠŸèƒ½/æ–°ç‰¹æ€§ |
| ğŸ”§ | ä¼˜åŒ–/ä¿®å¤/æ”¹è¿› |
| ğŸ›¡ï¸ | å®‰å…¨æ€§å¢å¼º |
| âš¡ | æ€§èƒ½æå‡ |
| ğŸ¨ | ç•Œé¢/æ ·å¼ä¼˜åŒ– |
| âœ¨ | åŠŸèƒ½äº®ç‚¹/ç‰¹æ•ˆ |
| ğŸ‰ | ç‰ˆæœ¬å‘å¸ƒ/é‡Œç¨‹ç¢‘ |
| ğŸ› | Bugä¿®å¤ |
| ğŸ“Š | æ•°æ®/ç»Ÿè®¡ç›¸å…³ |
| ğŸ”„ | åŒæ­¥/æ›´æ–°ç›¸å…³ |
| ğŸš€ | éƒ¨ç½²/å‘å¸ƒç›¸å…³ |

### ä¸€è‡´æ€§æ£€æŸ¥è¦æ±‚
- è„šæœ¬åŠŸèƒ½å¿…é¡»ä¸è¯´æ˜æ–‡æ¡£å®Œå…¨å¯¹åº”
- ä¿®æ”¹è¿‡çš„åŠŸèƒ½éƒ¨åˆ†å¿…é¡»åœ¨æ–‡æ¡£ä¸­åŒæ­¥æ›´æ–°
- æ£€æŸ¥æ‰€æœ‰æ–‡æ¡£çš„ä¸€è‡´æ€§ï¼Œç¡®ä¿ä¿¡æ¯å‡†ç¡®
- ç‰ˆæœ¬å·åœ¨è„šæœ¬å’Œæ–‡æ¡£ä¸­ä¿æŒåŒæ­¥

## ğŸ”¨ CLI å·¥ä½œæµç¨‹çº¦å®š

### æ–‡ä»¶ä¿®æ”¹æ ‡å‡†æµç¨‹
1. **è¯»å–** - ä½¿ç”¨ `read_file` å·¥å…·å…ˆè¯»å–æ–‡ä»¶å†…å®¹ï¼Œäº†è§£å½“å‰çŠ¶æ€
2. **åˆ†æ** - åˆ†æä»£ç ç»“æ„ã€åŠŸèƒ½é€»è¾‘å’Œéœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†
3. **ä¿®æ”¹** - ä½¿ç”¨ `replace` æˆ– `write_file` å·¥å…·è¿›è¡Œç²¾ç¡®ä¿®æ”¹
4. **éªŒè¯** - ç¡®è®¤ä¿®æ”¹ç»“æœç¬¦åˆé¢„æœŸï¼Œæ£€æŸ¥è¯­æ³•å’Œé€»è¾‘

### å¼€å‘é¡ºåºçº¦å®š
1. **è„šæœ¬ä¼˜å…ˆ** - å…ˆä¿®æ”¹ `.user.js` è„šæœ¬æ–‡ä»¶ï¼Œç¡®ä¿åŠŸèƒ½æ­£ç¡®
2. **æ–‡æ¡£åŒæ­¥** - ç­‰ç”¨æˆ·ç¡®è®¤åŠŸèƒ½æ»¡æ„åï¼Œå†æ›´æ–°å¯¹åº”çš„ `.md` æ–‡æ¡£
3. **é¡¹ç›®æ–‡æ¡£** - æ›´æ–° README.md å’Œ IFLOW.md
4. **æœ€ç»ˆç¡®è®¤** - ç­‰ç”¨æˆ·ç¡®è®¤æ–‡æ¡£å†…å®¹åå†ä¸Šä¼ åˆ° GitHub

### ä»»åŠ¡ç®¡ç†è§„åˆ™
- **å¤æ‚ä»»åŠ¡** - éå•ä¸€è¦æ±‚çš„ä»»åŠ¡å¿…é¡»ä½¿ç”¨ `todo_write` å·¥å…·è¿›è¡Œä»»åŠ¡è§„åˆ’
- **ç®€å•ä»»åŠ¡** - å•ä¸€ã€ç›´æ¥çš„ä»»åŠ¡å¯ä»¥ä¸ä½¿ç”¨ todo_write
- **è¿›åº¦è·Ÿè¸ª** - åŠæ—¶æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼Œç¡®ä¿ç”¨æˆ·äº†è§£è¿›å±•

### ä»£ç å®¡æŸ¥æ¸…å•
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] å…ƒæ•°æ®ä¸­çš„ `@description` å·²æ›´æ–°
- [ ] ä»£ç æ³¨é‡Šæ¸…æ™°æ˜äº†
- [ ] è°ƒè¯•æ¨¡å¼é»˜è®¤ä¸ºå…³é—­çŠ¶æ€
- [ ] æ²¡æœ‰ç¡¬ç¼–ç çš„æ•æ„Ÿä¿¡æ¯
- [ ] æ ·å¼æ³¨å…¥ä½¿ç”¨ `GM_addStyle` æˆ–åŠ¨æ€åˆ›å»º style æ ‡ç­¾

## ğŸš€ é¡¹ç›®ç»´æŠ¤

### æ›´æ–°æœºåˆ¶
- æ‰€æœ‰è„šæœ¬éƒ½é…ç½®äº†è‡ªåŠ¨æ›´æ–° URL (`@updateURL` å’Œ `@downloadURL`)
- ä½¿ç”¨ GitHub Raw ä½œä¸ºæ›´æ–°æº
- æ”¯æŒæ²¹çŒ´æ’ä»¶çš„è‡ªåŠ¨æ›´æ–°åŠŸèƒ½
- å»ºè®®å‘å¸ƒæ–°ç‰ˆæœ¬åç­‰å¾…å‡ åˆ†é’Ÿå†æµ‹è¯•æ›´æ–°

### å‘å¸ƒæµç¨‹
1. ä¿®æ”¹è„šæœ¬ä»£ç å¹¶æ›´æ–°ç‰ˆæœ¬å·
2. æ›´æ–°å¯¹åº”è„šæœ¬çš„ `.md` æ–‡æ¡£
3. æ›´æ–° README.mdï¼ˆå¦‚éœ€è¦ï¼‰
4. æäº¤åˆ° GitHub
5. ç­‰å¾… Raw é“¾æ¥åŒæ­¥ï¼ˆé€šå¸¸1-5åˆ†é’Ÿï¼‰
6. æµ‹è¯•æ›´æ–°åŠŸèƒ½

### è®¸å¯è¯
- é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯
- å¯è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘
- è¯·ä¿ç•™ä½œè€…ç½²åå’Œç‰ˆæƒå£°æ˜

## ğŸ“ é¡¹ç›®ç»“æ„

```
SurfHelper/
â”œâ”€â”€ IFLOW.md                    # é¡¹ç›®ä¸Šä¸‹æ–‡æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ README.md                   # é¡¹ç›®ä¸»è¦è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ .git/                       # Gitç‰ˆæœ¬æ§åˆ¶
â””â”€â”€ tampermonkey-scripts/       # æ²¹çŒ´è„šæœ¬ç›®å½•
    â”œâ”€â”€ coc-layout-helper.md    # COCé˜µå‹åŠ©æ‰‹æ–‡æ¡£
    â”œâ”€â”€ coc-layout-helper.user.js # COCé˜µå‹åŠ©æ‰‹è„šæœ¬ (v1.1.3)
    â”œâ”€â”€ javdb-manager.md        # JavDBç®¡ç†å™¨æ–‡æ¡£
    â”œâ”€â”€ javdb-manager.user.js   # JavDBç®¡ç†å™¨è„šæœ¬ (v1.5.0)
    â”œâ”€â”€ vip-video-parser.md     # VIPè§†é¢‘è§£æå™¨æ–‡æ¡£
    â”œâ”€â”€ vip-video-parser.user.js # VIPè§†é¢‘è§£æå™¨è„šæœ¬ (v1.4.2)
    â”œâ”€â”€ weibo-magnet-linker.md  # å¾®åšç£é“¾åŠ©æ‰‹æ–‡æ¡£
    â””â”€â”€ weibo-magnet-linker.user.js # å¾®åšç£é“¾åŠ©æ‰‹è„šæœ¬ (v1.1.1)
```

## ğŸ’¡ æŠ€æœ¯è¦ç‚¹

### æ²¹çŒ´è„šæœ¬å¼€å‘æŠ€å·§

#### 1. ç½‘ç»œè¯·æ±‚æ‹¦æˆª
```javascript
const originalOpen = XMLHttpRequest.prototype.open;
const originalSend = XMLHttpRequest.prototype.send;

XMLHttpRequest.prototype.open = function(method, url) {
    this._url = url;
    this._method = method;
    return originalOpen.apply(this, arguments);
};
```

#### 2. DOM å˜åŒ–ç›‘å¬
```javascript
const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
        if (mutation.type === 'childList') {
            // å¤„ç†æ–°å¢èŠ‚ç‚¹
        }
    });
});

observer.observe(document.body, {
    childList: true,
    subtree: true
});
```

#### 3. è·¨åŸŸæ•°æ®å­˜å‚¨
```javascript
// ä½¿ç”¨ GM_setValue / GM_getValue å®ç°è·¨åŸŸæ•°æ®å…±äº«
await GM_setValue('key', value);
const value = await GM_getValue('key', defaultValue);
```

#### 4. æ ·å¼æ³¨å…¥
```javascript
GM_addStyle(`
    .custom-class {
        property: value !important;
    }
`);
```

### å¸¸è§é—®é¢˜è§£å†³

#### iframe å¤„ç†
- ä½¿ç”¨ `window.top !== window.self` æ£€æµ‹æ˜¯å¦åœ¨ iframe ä¸­
- é¿å…åœ¨ iframe ä¸­é‡å¤åˆ›å»º UI å…ƒç´ 

#### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ `requestAnimationFrame` ä¼˜åŒ– DOM æ“ä½œ
- ä½¿ç”¨ `will-change` CSS å±æ€§ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½
- åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å’Œå®šæ—¶å™¨

#### å…¼å®¹æ€§å¤„ç†
- ä½¿ç”¨ `document.readyState` æ£€æµ‹é¡µé¢åŠ è½½çŠ¶æ€
- ä¸ºåŠ¨æ€åŠ è½½å†…å®¹ä½¿ç”¨ MutationObserver
